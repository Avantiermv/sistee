<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetShop System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="assets/style/main.css">
</head>
<body>

    <header class="p-3 mb-3 border-bottom">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-dark text-decoration-none">
                    <img src="assets/images/Frame 2.png" alt="" class="img-logo">
                    <span class="fs-4">A toca do bicho - Sistema de Gerenciamento</span>
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Navigação Tabs -->
        <ul class="nav nav-pills flex-wrap" id="myTab" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" id="clientes-tab" data-bs-toggle="tab" data-bs-target="#clientes" type="button" role="tab">Clientes</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="animais-tab" data-bs-toggle="tab" data-bs-target="#animais" type="button" role="tab">Animais</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="servicos-tab" data-bs-toggle="tab" data-bs-target="#servicos" type="button" role="tab">Serviços</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="funcionarios-tab" data-bs-toggle="tab" data-bs-target="#funcionarios" type="button" role="tab">Funcionários</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="produtos-tab" data-bs-toggle="tab" data-bs-target="#produtos" type="button" role="tab">Produtos</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="estoque-tab" data-bs-toggle="tab" data-bs-target="#estoque" type="button" role="tab">Estoque</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="vendas-tab" data-bs-toggle="tab" data-bs-target="#vendas" type="button" role="tab">Vendas</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="agenda-tab" data-bs-toggle="tab" data-bs-target="#agenda" type="button" role="tab">Agenda</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="atendimentos-tab" data-bs-toggle="tab" data-bs-target="#atendimentos" type="button" role="tab">Atendimentos</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="relatorios-tab" data-bs-toggle="tab" data-bs-target="#relatorios" type="button" role="tab">Relatórios</button></li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="myTabContent">
            <!-- Clientes Tab -->
            <div class="tab-pane fade show active" id="clientes" role="tabpanel">
                <h4>Gestão de Clientes</h4>
                <form id="form-cliente" class="row g-3 mb-4">
                    <input type="hidden" id="cliente-id">
                    <div class="col-md-6"><input type="text" class="form-control" id="cliente-nome" placeholder="Nome Completo" required></div>
                    <div class="col-md-6"><input type="tel" class="form-control" id="cliente-telefone" placeholder="Telefone" required></div>
                    <div class="col-md-6"><input type="email" class="form-control" id="cliente-email" placeholder="Email"></div>
                    <div class="col-md-6"><input type="text" class="form-control" id="cliente-endereco" placeholder="Endereço"></div>
                    <div class="col-12"><button type="submit" class="btn btn-primary">Salvar Cliente</button> <button type="button" class="btn btn-light" id="btn-limpar-cliente">Limpar</button></div>
                </form>
                <input type="text" class="form-control mb-3" id="busca-cliente" placeholder="Buscar cliente por nome...">
                <div class="table-responsive"><table class="table table-hover"><thead><tr><th>Nome</th><th>Telefone</th><th>Email</th><th>Ações</th></tr></thead><tbody id="tabela-clientes"></tbody></table></div>
            </div>

            <!-- Animais Tab -->
            <div class="tab-pane fade" id="animais" role="tabpanel">
                <h4>Gestão de Animais</h4>
                <form id="form-animal" class="row g-3 mb-4">
                    <input type="hidden" id="animal-id">
                    <div class="col-md-4"><input type="text" class="form-control" id="animal-nome" placeholder="Nome do Animal" required></div>
                    <div class="col-md-4"><input type="text" class="form-control" id="animal-especie" placeholder="Espécie (Ex: Cão, Gato)" required></div>
                    <div class="col-md-4"><input type="text" class="form-control" id="animal-raca" placeholder="Raça"></div>
                    <div class="col-md-4"><label for="animal-nascimento" class="form-label">Data de Nascimento</label><input type="date" class="form-control" id="animal-nascimento"></div>
                    <div class="col-md-4"><label for="animal-tutor" class="form-label">Tutor</label><select class="form-select" id="animal-tutor" required></select></div>
                    <div class="col-md-4"><label for="animal-vacina" class="form-label">Última Vacina</label><input type="date" class="form-control" id="animal-vacina"></div>
                    <div class="col-12"><button type="submit" class="btn btn-primary">Salvar Animal</button></div>
                </form>
                <div class="table-responsive"><table class="table table-hover"><thead><tr><th>Nome</th><th>Espécie</th><th>Tutor</th><th>Vacinas</th><th>Ações</th></tr></thead><tbody id="tabela-animais"></tbody></table></div>
            </div>

            <!-- Serviços Tab -->
            <div class="tab-pane fade" id="servicos" role="tabpanel">
                <h4>Nossos Serviços</h4>
                <div id="cards-servicos" class="row"></div>
            </div>

            <!-- Funcionários Tab -->
            <div class="tab-pane fade" id="funcionarios" role="tabpanel">
                <h4>Gestão de Funcionários</h4>
                 <form id="form-funcionario" class="row g-3 mb-4">
                    <input type="hidden" id="funcionario-id">
                    <div class="col-md-4"><input type="text" class="form-control" id="funcionario-nome" placeholder="Nome do Funcionário" required></div>
                    <div class="col-md-4">
                        <select class="form-select" id="funcionario-cargo" required>
                            <option value="">Selecione o Cargo</option>
                            <option value="Veterinário">Gerente</option>
                            <option value="Tosador">Tosador</option>
                            <option value="Atendente">Atendente</option>
                        </select>
                    </div>
                    <div class="col-md-4"><input type="tel" class="form-control" id="funcionario-telefone" placeholder="Telefone"></div>
                    <div class="col-12"><button type="submit" class="btn btn-primary">Salvar Funcionário</button></div>
                </form>
                <div class="table-responsive"><table class="table table-hover"><thead><tr><th>Nome</th><th>Cargo</th><th>Telefone</th><th>Ações</th></tr></thead><tbody id="tabela-funcionarios"></tbody></table></div>
            </div>

            <!-- Produtos Tab -->
            <div class="tab-pane fade" id="produtos" role="tabpanel">
                <h4>Gestão de Produtos</h4>
                <form id="form-produto" class="row g-3 mb-4">
                    <input type="hidden" id="produto-id">
                    <div class="col-md-3"><input type="text" class="form-control" id="produto-nome" placeholder="Nome do Produto" required></div>
                    <div class="col-md-3"><input type="text" class="form-control" id="produto-categoria" placeholder="Categoria (Ração, Brinquedo...)" required></div>
                    <div class="col-md-3"><input type="number" class="form-control" id="produto-preco" placeholder="Preço (R$)" step="0.01" required></div>
                    <div class="col-md-3"><input type="text" class="form-control" id="produto-codigo" placeholder="Código de Barras/SKU"></div>
                    <div class="col-12"><button type="submit" class="btn btn-primary">Salvar Produto</button></div>
                </form>
                <div id="lista-produtos" class="row g-4"></div>
            </div>

            <!-- Estoque Tab -->
            <div class="tab-pane fade" id="estoque" role="tabpanel">
                <h4>Controle de Estoque</h4>
                <p class="text-muted">Ajuste a quantidade dos produtos em estoque. Itens com menos de 5 unidades são destacados.</p>
                <div class="table-responsive"><table class="table"><thead><tr><th>Produto</th><th>Categoria</th><th class="text-center">Quantidade</th><th class="text-center">Ajustar</th></tr></thead><tbody id="tabela-estoque"></tbody></table></div>
            </div>

            <!-- Vendas Tab -->
            <div class="tab-pane fade" id="vendas" role="tabpanel">
                <h4>Registro de Vendas</h4>
                <div class="row">
                    <div class="col-md-5">
                        <h5>Adicionar Itens</h5>
                        <div class="mb-3">
                            <label for="venda-servicos" class="form-label">Serviços</label>
                            <select id="venda-servicos" class="form-select"></select>
                            <button class="btn btn-secondary btn-sm mt-2" id="btn-add-servico-carrinho">Adicionar Serviço</button>
                        </div>
                        <div class="mb-3">
                            <label for="venda-produtos" class="form-label">Produtos</label>
                            <select id="venda-produtos" class="form-select"></select>
                            <button class="btn btn-secondary btn-sm mt-2" id="btn-add-produto-carrinho">Adicionar Produto</button>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <h5>Carrinho</h5>
                        <div id="carrinho-vazio" class="alert alert-secondary">O carrinho está vazio.</div>
                        <div class="table-responsive">
                            <table class="table" id="tabela-carrinho" style="display:none;">
                                <thead><tr><th>Item</th><th>Preço</th><th>Qtd</th><th>Subtotal</th><th></th></tr></thead>
                                <tbody id="corpo-tabela-carrinho"></tbody>
                            </table>
                        </div>
                        <div id="carrinho-total" class="mt-3" style="display:none;">
                            <div class="row mb-2">
                                <div class="col-8">Subtotal:</div>
                                <div class="col-4 text-end" id="carrinho-subtotal">R$ 0,00</div>
                            </div>
                            <div class="row mb-2 align-items-center">
                                <div class="col-5">Desconto (%):</div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="carrinho-desconto" value="0" min="0" max="100"></div>
                            </div>
                             <hr>
                            <h4 class="row">
                                <div class="col-6">Total:</div>
                                <div class="col-6 text-end" id="carrinho-total-final">R$ 0,00</div>
                            </h4>
                            <button class="btn btn-primary w-100 mt-3" id="btn-finalizar-venda">Finalizar Venda e Gerar Recibo</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agenda Tab -->
            <div class="tab-pane fade" id="agenda" role="tabpanel">
                <h4>Agenda de Atendimentos</h4>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 id="agenda-mes-ano"></h5>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#agendaModal">
                        <i class="fas fa-plus me-2"></i>Novo Agendamento
                    </button>
                </div>
                <div class="calendar" id="calendario-semanal"></div>
            </div>

            <!-- Atendimentos Tab -->
            <div class="tab-pane fade" id="atendimentos" role="tabpanel">
                <h4>Atendimentos do Dia</h4>
                <p class="text-muted">Acompanhe e finalize os atendimentos agendados para hoje.</p>
                <div id="lista-atendimentos-dia">
                    <div class="alert alert-info">Nenhum atendimento agendado para hoje.</div>
                </div>
            </div>

            <!-- Relatórios Tab -->
            <div class="tab-pane fade" id="relatorios" role="tabpanel">
                <h4>Relatórios Gerenciais</h4>
                 <div class="row">
                    <div class="col-md-6">
                        <h5>Faturamento Mensal (Últimos 6 meses)</h5>
                        <canvas id="grafico-faturamento"></canvas>
                    </div>
                    <div class="col-md-6">
                        <h5>Serviços Mais Realizados</h5>
                        <canvas id="grafico-servicos"></canvas>
                    </div>
                </div>
                <hr class="my-4">
                <button class="btn btn-secondary" id="btn-exportar-pdf-clientes"><i class="fas fa-file-pdf me-2"></i>Exportar Lista de Clientes (PDF)</button>
            </div>
        </div>
    </div>

    <!-- Modal Agendamento -->
    <div class="modal fade" id="agendaModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Novo Agendamento</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="form-agenda">
                        <div class="mb-3"><label class="form-label">Animal</label><select id="agenda-animal" class="form-select" required></select></div>
                        <div class="mb-3"><label class="form-label">Serviço</label><select id="agenda-servico" class="form-select" required></select></div>
                        <div class="mb-3"><label class="form-label">Funcionário</label><select id="agenda-funcionario" class="form-select" required></select></div>
                        <div class="mb-3"><label class="form-label">Data e Hora</label><input type="datetime-local" id="agenda-data" class="form-control" required></div>
                        <button type="submit" class="btn btn-primary">Agendar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Recibo de Venda -->
    <div class="modal fade" id="receipt-modal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Recibo de Venda</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="receipt-content">
                    <!-- O conteúdo do recibo será injetado aqui -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" onclick="window.print()"><i class="fas fa-print me-2"></i>Imprimir</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="assets/script/main.js"></script>

</body>
</html>
